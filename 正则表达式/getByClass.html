<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Document</title>
</head>
<body>
	<ul id="ul1">
		<li class="aa">001</li>
		<li>
			002
			<span class="aa">span</span>
		</li>
		<li class="aa">003</li>
	</ul>

	<div class="aa">div</div>
	<script>
		//var aLi = oUl1.getElementsByClassName("aa");
		var oUl1 = document.getElementById('ul1');
		var aLi = getByClass('aa', oUl1, 'li');

		for(var i=0; i<aLi.length; i++){
			aLi[i].style.background = 'red';
		}



		function getByClass(clsName, context, tag){
			var result = [];
			context = context || document;
			/*if(document.getElementsByClassName){
				return context.getElementsByClassName(clsName);
			}*/
			tag = tag || '*';
			var arr = context.getElementsByTagName(tag);
			for(var i=0; i<arr.length; i++){
				var re = new RegExp("\\b"+clsName+"\\b", 'g');
				if(  re.test(arr[i].className)  ){
					result.push(arr[i]);
				}
			}
			return result;
		}











	</script>
</body>
</html>